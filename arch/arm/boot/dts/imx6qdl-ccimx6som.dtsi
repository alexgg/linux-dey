// SPDX-License-Identifier: GPL-2.0 OR X11
/*
 * Copyright 2019 Digi International, Inc.
 */

/ {
	memory@10000000 {
		device_type = "memory";
		reg = <0x10000000 0>; /* will be filled by U-Boot */
	};
};

&i2c2 {
	clock-frequency = <100000>;
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_i2c2>;
	status = "okay";

	pmic@58 {
		compatible = "dlg,da9063";
		reg = <0x58>;
		interrupt-parent = <&gpio7>;
		interrupts = <12 2>;
		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_pmic>;

		onkey {
			compatible = "dlg,da9063-onkey";
		};

		rtc {
			compatible = "dlg,da9063-rtc";
		};

		regulators {
			bcore1: bcore1 {
				regulator-name = "DA9063_BCORE1";
				regulator-boot-on;
				regulator-always-on;
			};

			bcore2: bcore2 {
				regulator-name = "DA9063_BCORE2";
				regulator-boot-on;
				regulator-always-on;
			};

			bio: bio {
				regulator-name = "DA9063_BIO";
				regulator-boot-on;
			};

			bmem: bmem {
				regulator-name = "DA9063_BMEM";
				regulator-boot-on;
				regulator-always-on;
			};

			bperi: bperi {
				regulator-name = "DA9063_BPERI";
				regulator-boot-on;
				regulator-always-on;
			};

			bpro: bpro {
				regulator-name = "DA9063_BPRO";
				regulator-boot-on;
				regulator-state-mem {
					regulator-off-in-suspend;
				};
				regulator-state-disk {
					regulator-off-in-suspend;
				};
			};

			ldo2: ldo2 {
				regulator-name = "DA9063_LDO2";
				regulator-boot-on;
			};

			ldo3: ldo3 {
				regulator-name = "DA9063_LDO3";
				regulator-boot-on;
				regulator-always-on;
			};

			ldo4: ldo4 {
				regulator-name = "DA9063_LDO4";
				regulator-min-microvolt = <2500000>;
				regulator-max-microvolt = <2500000>;
				regulator-state-mem {
					regulator-off-in-suspend;
				};
				regulator-state-disk {
					regulator-off-in-suspend;
				};
			};

			ldo5: ldo5 {
				regulator-name = "DA9063_LDO5";
				regulator-boot-on;
				regulator-always-on;
			};

			ldo6: ldo6 {
				regulator-name = "DA9063_LDO6";
				regulator-min-microvolt = <900000>;
				regulator-max-microvolt = <3600000>;
				regulator-state-mem {
					regulator-off-in-suspend;
				};
				regulator-state-disk {
					regulator-off-in-suspend;
				};
			};

			ldo7: ldo7 {
				regulator-name = "DA9063_LDO7";
				regulator-min-microvolt = <900000>;
				regulator-max-microvolt = <3600000>;
				regulator-state-mem {
					regulator-off-in-suspend;
				};
				regulator-state-disk {
					regulator-off-in-suspend;
				};
			};

			ldo8: ldo8 {
				regulator-name = "DA9063_LDO8";
				regulator-min-microvolt = <900000>;
				regulator-max-microvolt = <3600000>;
				regulator-state-mem {
					regulator-off-in-suspend;
				};
				regulator-state-disk {
					regulator-off-in-suspend;
				};
			};

			ldo11: ldo11 {
				regulator-name = "DA9063_LDO11";
				regulator-boot-on;
				regulator-always-on;
			};

		};

		wdt {
			compatible = "dlg,da9063-watchdog";
		};
	};
};

&uart4 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_uart4>;
};

&usdhc1 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_usdhc1>;
	bus-width = <4>;
	no-1-8-v;
	status = "okay";
};

&usdhc4 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_usdhc4>;
	bus-width = <8>;
	non-removable;
	no-1-8-v;
	status = "okay";
};

&iomuxc {
	pinctrl_i2c2: i2c2 {
		fsl,pins = <
			MX6QDL_PAD_KEY_COL3__I2C2_SCL 0x4001b8b1
			MX6QDL_PAD_KEY_ROW3__I2C2_SDA 0x4001b8b1
		>;
	};

	pinctrl_pmic: pmicgrp {
		fsl,pins = <
			MX6QDL_PAD_GPIO_17__GPIO7_IO12 0x1b0b0
		>;
	};

	pinctrl_uart4: uart4 {
		fsl,pins = <
			MX6QDL_PAD_KEY_COL0__UART4_TX_DATA 0x1b0b1
			MX6QDL_PAD_KEY_ROW0__UART4_RX_DATA 0x1b0b1
		>;
	};

	pinctrl_usdhc1: usdhc1 {
		fsl,pins = <
			MX6QDL_PAD_SD1_CMD__SD1_CMD    0x17071
			MX6QDL_PAD_SD1_CLK__SD1_CLK    0x10071
			MX6QDL_PAD_SD1_DAT0__SD1_DATA0 0x17071
			MX6QDL_PAD_SD1_DAT1__SD1_DATA1 0x17071
			MX6QDL_PAD_SD1_DAT2__SD1_DATA2 0x17071
			MX6QDL_PAD_SD1_DAT3__SD1_DATA3 0x17071
		>;
	};

	pinctrl_usdhc4: usdhc4 {
		  fsl,pins = <
			  MX6QDL_PAD_SD4_CMD__SD4_CMD    0x17059
			  MX6QDL_PAD_SD4_CLK__SD4_CLK    0x10059
			  MX6QDL_PAD_SD4_DAT0__SD4_DATA0 0x17059
			  MX6QDL_PAD_SD4_DAT1__SD4_DATA1 0x17059
			  MX6QDL_PAD_SD4_DAT2__SD4_DATA2 0x17059
			  MX6QDL_PAD_SD4_DAT3__SD4_DATA3 0x17059
			  MX6QDL_PAD_SD4_DAT4__SD4_DATA4 0x17059
			  MX6QDL_PAD_SD4_DAT5__SD4_DATA5 0x17059
			  MX6QDL_PAD_SD4_DAT6__SD4_DATA6 0x17059
			  MX6QDL_PAD_SD4_DAT7__SD4_DATA7 0x17059
			  >;
	  };
};
